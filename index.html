<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<title>Copyflix</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&display=swap" rel="stylesheet">
<link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" rel="stylesheet">
<link rel="icon" type="image/png" href="favicon.png">

<style>
*{margin:0;padding:0;box-sizing:border-box;font-family:'Inter',sans-serif;}
body{background:#0f0f0f;color:white;}

/* HEADER */
header{position:fixed;top:0;width:100%;height:70px;z-index:10;
display:flex;align-items:center;justify-content:space-between;
padding:0 40px;background:rgba(0,0,0,0.6);backdrop-filter:blur(10px);
transition:background 0.3s,box-shadow 0.3s;}
header.scrolled{background:#000;box-shadow:0 4px 15px rgba(0,0,0,.6);}
.logo{font-size:28px;font-weight:800;color:#e50914;}
nav{display:flex;gap:25px;}
nav a{color:white;text-decoration:none;font-weight:500;cursor:pointer;}
nav a:hover{color:#e50914;}
.header-right{display:flex;gap:10px;align-items:center;}

/* ADMIN BUTTON */
.admin-btn{padding:8px 16px;border:none;border-radius:5px;background:#e50914;color:white;font-weight:600;cursor:pointer;}
.admin-btn:hover{background:#f6121d;}

/* SEARCH */
.search-box{position:relative;}
.search-box input{background:rgba(255,255,255,0.1);border:none;border-radius:20px;padding:8px 15px 8px 35px;color:white;width:180px;transition:width 0.3s;}
.search-box input:focus{width:240px;outline:none;}
.search-box i{position:absolute;left:12px;top:50%;transform:translateY(-50%);color:#bbb;}

/* HERO */
.hero{
  height:45vh;margin-top:70px;
  background:linear-gradient(to bottom,rgba(0,0,0,.5),rgba(0,0,0,.95)),
             url("https://images.unsplash.com/photo-1524985069026-dd778a71c7b4") center/cover no-repeat;
  display:flex;flex-direction:column;justify-content:center;align-items:center;text-align:center;
  padding:0 40px;
}
.hero h1{font-size:48px;margin-bottom:10px;}
.hero p{font-size:18px;max-width:650px;color:#ddd;line-height:1.4;}

/* CONTENT */
#content{margin-top:20px;position:relative;z-index:2;padding-bottom:60px;}
#grid{display:flex;flex-wrap:wrap;justify-content:center;gap:20px;padding:0 40px;}
.card{background:#111;border-radius:12px;overflow:hidden;width:180px;cursor:pointer;transition:transform 0.3s,box-shadow 0.3s;}
.card:hover{transform:scale(1.05);box-shadow:0 8px 20px rgba(0,0,0,0.7);}
.card img{width:100%;height:270px;object-fit:cover;}
.card-title{text-align:center;padding:12px;font-size:14px;font-weight:500;}
.folder{border:2px solid #e50914;}

/* FOOTER */
footer{text-align:center;padding:30px;color:#999;background:black;}

/* RESPONSIVE */
@media(max-width:768px){
  header{padding:0 20px;}
  .hero h1{font-size:36px;}
  .hero p{font-size:16px; max-width:90%;}
  #grid{gap:15px;}
  .card{width:140px;}
  .card img{height:210px;}
  .search-box input{width:140px;}
  .search-box input:focus{width:180px;}
}
</style>
</head>

<body>

<header>
  <div class="logo">COPYFLIX</div>
  <nav>
    <a onclick="setFilter('all')">Accueil</a>
    <a onclick="setFilter('film')">Films</a>
    <a onclick="setFilter('serie')">Séries</a>
  </nav>
  <div class="header-right">
    <div class="search-box">
      <i class="fa-solid fa-magnifying-glass"></i>
      <input type="text" id="searchInput" placeholder="Rechercher...">
    </div>
    <button class="admin-btn" onclick="window.open('admin/login.html','_blank')">Admin</button>
  </div>
</header>

<section class="hero">
  <h1>Bienvenue sur Copyflix</h1>
  <p>Ta plateforme privée de films et séries.<br>Simple. Moderne. Efficace.</p>
</section>

<section id="content">
  <div id="grid"></div>
</section>

<footer>© 2025 Copyflix</footer>

<script>
// HEADER SCROLL EFFECT
const header=document.querySelector("header");
window.addEventListener("scroll",()=>header.classList.toggle("scrolled",scrollY>50));

// ----- JSON CENTRALISE -----
const copyflixData = {
  "folders": [
    {
      "id": "id-1767280611268",
      "title": "Pirates des Caraïbes",
      "type": "Folder",
      "video": "",
      "image": "https://image.tmdb.org/t/p/w500/usU1WwpWh0yKx65jZ12fQyklqUC.jpg",
      "children": [
        {
          "id": "id-1767280664240",
          "title": "La Malédiction du Black Pearl",
          "type": "Film",
          "video": "https://vidmoly.net/embed-k62t9dnk8ayx.html",
          "image": "https://image.tmdb.org/t/p/w600_and_h900_face/jFmc6zbnx6mSoxejECYvdi3IHIs.jpg",
          "children": []
        },
        {
          "id": "id-1767280752771",
          "title": "Le Secret du coffre maudit ",
          "type": "Film",
          "video": "https://vidmoly.net/embed-2auw0gof0ysr.html",
          "image": "https://image.tmdb.org/t/p/w600_and_h900_face/bzOlMYEfNmgCDnFHj3zL3RBqwau.jpg",
          "children": []
        },
        {
          "id": "id-1767280791677",
          "title": "Jusqu'au bout du monde ",
          "type": "Film",
          "video": "https://vidmoly.net/embed-bcmp3nqh45r9.html",
          "image": "https://image.tmdb.org/t/p/w600_and_h900_face/3JjceHUzbtgJ4fJs6x2ow4ckH89.jpg",
          "children": []
        },
        {
          "id": "id-1767280821680",
          "title": "La Fontaine de jouvence",
          "type": "Film",
          "video": "https://vidmoly.net/embed-6y841fa09ato.html",
          "image": "https://image.tmdb.org/t/p/w600_and_h900_face/5JjjjGg24IGRXIQtaZkPU59acjV.jpg",
          "children": []
        },
        {
          "id": "id-1767280854766",
          "title": "La Vengeance de Salazar ",
          "type": "Film",
          "video": "https://vidmoly.net/embed-f9d7kg4zvjs9.html",
          "image": "https://image.tmdb.org/t/p/w600_and_h900_face/fVMudKQfhosujwgAKhfxNGfS9sL.jpg",
          "children": []
        }
      ]
    }
  ],
  "films": []
}

// ---- RENDER ----
const grid=document.getElementById("grid");
let currentFilter='all';

renderRoot();

// RENDER ROOT
function renderRoot(){
  renderItems(copyflixData.folders, copyflixData.films);
}

// RENDER ITEMS
function renderItems(folders=[], films=[]){
  grid.innerHTML="";
  folders.forEach(f=>{
    // filtre dossier contenant le type demandé
    if(currentFilter==='all' || folderHasType(f,currentFilter)) renderFolder(f);
  });
  films.forEach(f=>{
    if(currentFilter==='all' || f.type===currentFilter) renderFilm(f);
  });
}

// FONCTION POUR VERIFIER TYPE DANS DOSSIER
function folderHasType(folder,type){
  if(!folder.children || folder.children.length===0) return false;
  return folder.children.some(c=>c.type===type);
}

// CARDS
function renderFolder(folder){
  const card=document.createElement("div");
  card.className="card folder";
  card.innerHTML=`<img src="${folder.image||'https://via.placeholder.com/300x450?text=Dossier'}"><div class="card-title">${folder.title}</div>`;
  card.onclick=()=>openFolder(folder);
  grid.appendChild(card);
}

function renderFilm(film){
  const card=document.createElement("div");
  card.className="card";
  card.innerHTML=`<img src="${film.image||'https://via.placeholder.com/300x450?text=Film'}"><div class="card-title">${film.title}</div>`;
  card.onclick=()=>window.open(film.video,"_blank");
  grid.appendChild(card);
}

// NAVIGATION DOSSIERS
let historyStack=[];
function openFolder(folder){
  historyStack.push(folder);
  renderItems(
    folder.children?.filter(i=>i.type==="Folder")||[],
    folder.children?.filter(i=>i.type!=="Folder")||[]
  );
}

// FILTRE FILMS / SERIES
function setFilter(type){
  currentFilter=type==='serie'?'serie':type==='film'?'film':'all';
  renderRoot();
}

// RECHERCHE
document.getElementById("searchInput").addEventListener("input", e=>{
  const q=e.target.value.toLowerCase();
  grid.innerHTML="";
  // search folders
  copyflixData.folders.forEach(f=>{
    if(f.title.toLowerCase().includes(q) && (currentFilter==='all' || folderHasType(f,currentFilter))) renderFolder(f);
    // search children
    f.children.forEach(c=>{
      if(c.title.toLowerCase().includes(q) && (currentFilter==='all' || c.type===currentFilter)) renderFilm(c);
    });
  });
  // search root films
  copyflixData.films.forEach(f=>{
    if(f.title.toLowerCase().includes(q) && (currentFilter==='all' || f.type===currentFilter)) renderFilm(f);
  });
});

</script>
</body>
</html>
